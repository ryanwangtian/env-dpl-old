!function(e){function n(n,i){if(this instanceof l&&null!=n&&"object"==typeof n){var o=this,r=this.options.keys,m={data:n,id:n[r.id],name:n[r.name],icon:n[r.icon],children:[],$element:e(s.menuItem),$childrenCntr:null,level:null,parentMenuItem:null};if(m.$element.children("a").click(function(){if(m.children.length>0)if(m.$element.hasClass(a.active))m.$childrenCntr.slideUp(function(){m.$element.removeClass(a.active)});else{m.$childrenCntr.slideDown(),m.$element.addClass(a.active);var e=null==m.parentMenuItem?o.menuItems:m.parentMenuItem.children;for(var n in e)if(e[n].$element.hasClass(a.active)&&e[n]!=m){e[n].$childrenCntr.slideUp(function(){e[n].$element.removeClass(a.active)});break}}t.call(o,m)}).find("."+a.menuItemTitle).text(m.name).attr("title",m.name),m.$element.find("."+a.menuItemIcon).addClass(m.icon||"").attr("title",m.name),null==i?(m.level=0,m.$element.addClass(a.level+0),this.menuItems.push(m),e(this.element).append(m.$element)):(m.level=i.level+1,m.$element.addClass(a.level+m.level),m.parentMenuItem=i,i.children.push(m),i.$childrenCntr.append(m.$element)),null!=n[r.children]&&n[r.children].length>0){m.$childrenCntr=e(s.subMenuCntr),m.$element.append(m.$childrenCntr),m.$element.children("a").append(s.menuItemArrow);for(var c in n[r.children])arguments.callee.call(this,n[r.children][c],m)}}}function t(e){this instanceof l&&"function"==typeof this.options.onMenuItemClicked&&this.options.onMenuItemClicked.call(this,e)}function l(t,l){if(null!=t&&t instanceof HTMLUListElement){var s=e(t);l=e.extend(!0,{},i,l),this.options=l,this.element=t,this.menuItems=[],s.addClass(l.mini?a.bodyMini:a.body);for(var o in l.data)n.call(this,l.data[o],null)}}var i={keys:{id:"id",name:"name",children:"children",icon:"icon"},mini:!1,data:[],onMenuItemClicked:function(e){}},a={body:"env-left-menu",bodyMini:"env-left-menu-mini",menuItemIcon:"eln-item-icon",menuItemTitle:"eln-item-title",menuItemArrow:"eln-item-arrow",level:"level",hidden:"hidden",collapse:"collapse",active:"active",icon:"env-icon-16"},s={menuItem:["<li>","<a>",'<span class="'+a.menuItemIcon+" "+a.icon+'"></span>','<span class="'+a.menuItemTitle+'"></span>',"</a>","</li>"].join(""),menuItemArrow:'<span class="'+a.menuItemArrow+'"></span>',subMenuCntr:"<ul></ul>"};l.prototype={constructor:l,setMini:function(n){this.options.mini=!!n,n?e(this.element).removeClass(a.body).addClass(a.bodyMini):e(this.element).removeClass(a.bodyMini).addClass(a.body)}},e.fn.envLeftMenu=function(n){if(0==this.length)return this;if(null==n)return e(this[0]).data("envLeftMenu");if(null==l.prototype[n])return this.each(function(){var t=e(this).data("envLeftMenu");null==t&&(t=new l(this,n),e.data(this,"envLeftMenu",t))});var t=l.prototype[n],i=e(this[0]).data("envLeftMenu");return null!=i?"function"==typeof t?t.apply(i,Array.prototype.slice.call(arguments,1)):i[n]:void 0}}(jQuery);